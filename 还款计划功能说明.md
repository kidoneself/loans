# 还款计划功能说明

## 新增功能

为了让您更清晰地了解贷款还款情况，我添加了一个全新的**还款计划**页面。

## 功能特点

### 1. 统计概览
- **活跃贷款数**：当前还在还款中的贷款笔数
- **最快还清**：哪笔贷款最快能还清，还需要多少个月
- **全部还清**：所有贷款预计的最晚还清日期
- **总负债**：当前所有贷款的剩余总金额

### 2. 详细还款计划
每笔贷款清晰展示：
- 📋 **贷款名称和平台**
- 💰 **剩余金额**：还需要还多少钱
- 📅 **每月还款**：每期需要还的金额
- 🎯 **预计还清日期**：具体的年月日
- 📊 **还款进度条**：直观的百分比显示
- 📈 **还款期数**：已还多少期/总共多少期（剩余多少期）

### 3. 还清时间轴
- 按照还清时间排序展示所有贷款
- 可视化的时间线展示
- 不同颜色标识不同时长：
  - 🟢 绿色：3个月内还清
  - 🟡 黄色：3-12个月还清
  - 🔴 红色：12个月以上还清

## 访问方式

1. **导航栏**：所有页面的导航栏都有"还款计划 ⭐"链接
2. **首页快捷入口**：首页的"快捷操作"区域有"⭐ 还款计划"按钮

## 技术实现

### 前端
- 新增页面：`repayment-plan.html`
- 响应式设计，支持移动端
- 美观的渐变色和动画效果

### 后端
- 新增API：`GET /api/loans/repayment-plan`
- 自动计算每笔贷款的还清时间
- 按还清日期自动排序

### 计算逻辑
- **剩余月数** = 剩余金额 ÷ 每月还款（向上取整）
- **预计还清日期** = 当前日期 + 剩余月数
- **还款进度** = 已还金额 ÷ 总金额 × 100%

## 使用场景

1. **制定还款策略**：查看哪笔贷款快还清了，是否要加快还款
2. **长期规划**：了解所有贷款什么时候能完全还清
3. **进度追踪**：直观看到每笔贷款的还款进度
4. **时间管理**：通过时间轴了解不同时期的还款压力

## 示例展示

```
统计概览：
┌─────────────┬──────────────┬──────────────┬─────────────┐
│ 活跃贷款    │ 最快还清      │ 全部还清      │ 总负债      │
│     3笔     │  5个月       │ 2025年12月    │  ¥85,000   │
└─────────────┴──────────────┴──────────────┴─────────────┘

详细计划：
┌───────────────────────────────────────────────────────────┐
│ 📋 拍拍贷 - 建设银行                                       │
│ 💰 剩余：¥15,000  📅 每月：¥3,000                          │
│ 🎯 预计还清：2025年4月15日（5个月后）                       │
│ 📊 ████████░░ 75%  已还 15/20期（剩余5期）                 │
└───────────────────────────────────────────────────────────┘
```

## 注意事项

- 还清日期是基于当前还款计划的**预测**，实际可能因提前还款等因素变化
- 进度百分比基于**已还金额**和**总借款金额**计算
- 只显示状态为"active"（还款中）的贷款

---

如有任何问题或建议，欢迎反馈！

